{% extends "admin/base.html" %}

{% block title %}Customer Detail{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <a href="{{ url_for('admin_customers') }}" style="color: #8B7355;">&larr; Back to Customers</a>
</div>

<h1>{{ customer.name }}</h1>

<div style="background-color: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 2rem;">
    <h2 style="margin-top: 0;">Contact Information</h2>
    <p><strong>Email:</strong> {{ customer.email }}</p>
    <p><strong>Phone:</strong> {{ customer.phone or 'Not provided' }}</p>
    <p><strong>Address:</strong> {{ customer.address or 'Not provided' }}</p>
    <p><strong>Customer Since:</strong> {{ customer.created_at.strftime('%B %d, %Y') }}</p>
</div>

<h2>Order History ({{ orders|length }})</h2>
<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Order #</th>
                <th>Total</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>#{{ order.id }}</td>
                <td>${{ "%.2f"|format(order.total_amount) }}</td>
                <td><span class="badge badge-{{ order.status }}">{{ order.status }}</span></td>
                <td>{{ order.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                <td><a href="{{ url_for('admin_order_detail', order_id=order.id) }}">View</a></td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align: center; color: #718096;">No orders yet</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
