{% extends "base.html" %}

{% block content %}
<section class="section">
    <div class="container">
        <a href="{{ url_for('products') }}" style="color: #8B7355; margin-bottom: 1rem; display: inline-block;">&larr; Back to Products</a>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-top: 2rem;">
            <div>
                {% if product.image_url %}
                <img src="{{ product.image_url }}" alt="{{ product.name }}" 
                     style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                {% else %}
                <div style="width: 100%; aspect-ratio: 1; background-color: #E8D5C4; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <span style="color: #8B7355;">No Image Available</span>
                </div>
                {% endif %}
            </div>
            
            <div>
                <h1>{{ product.name }}</h1>
                <p style="font-size: 1.5rem; color: #8B7355; font-weight: 600; margin: 1rem 0;">
                    ${{ "%.2f"|format(product.price) }}
                </p>
                
                <p style="margin-bottom: 1rem;">
                    <strong>Category:</strong> {{ product.category|replace('_', ' ')|title }}
                </p>
                
                {% if product.stock_quantity > 0 %}
                <p style="color: #22543D; margin-bottom: 1rem;">
                    ✓ In Stock ({{ product.stock_quantity }} available)
                </p>
                {% else %}
                <p style="color: #742A2A; margin-bottom: 1rem;">
                    ✗ Out of Stock
                </p>
                {% endif %}
                
                <div style="margin: 2rem 0; padding: 1.5rem; background-color: #F7FAFC; border-radius: 8px;">
                    <h3>Description</h3>
                    <p style="line-height: 1.6;">{{ product.description }}</p>
                </div>
                
                {% if product.stock_quantity > 0 %}
                <form method="POST" action="{{ url_for('add_to_cart', product_id=product.id) }}">
                    <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem;">
                        <label for="quantity">Quantity:</label>
                        <input type="number" id="quantity" name="quantity" value="1" min="1" 
                               max="{{ product.stock_quantity }}"
                               style="width: 80px; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                    </div>
                    <button type="submit" class="btn primary-btn" style="width: 100%;">Add to Cart</button>
                </form>
                {% else %}
                <button class="btn secondary-btn" disabled style="width: 100%;">Out of Stock</button>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}
